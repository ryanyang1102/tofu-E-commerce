(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221b88"],{cc0b:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"nav_space"},[e("div",{staticClass:"container py-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 mb-4"},[t._m(0),e("div",{staticClass:"border border-primary radius-2 p-4"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseCoupon","aria-expanded":"false","aria-controls":"collapseCoupon"}},[t._v(" 查看折扣券 ")]),e("div",{staticClass:"collapse",attrs:{id:"collapseCoupon"}},[e("ul",{staticClass:"bg-light rounded py-1 mt-2"},t._l(t.allCoupons,(function(a){return e("li",{key:a.id,staticClass:"card couponCard m-2",on:{click:function(e){return t.getCoupon_code(a.code)}}},[e("div",{staticClass:"card-header bg-white d-flex align-items-lg-baseline border-bottom-0"},[e("span",{staticClass:"badge bg-light text-primary fz-4 me-4"},[e("i",{staticClass:"fas fa-tags"}),t._v(" "+t._s(a.percent)+"% ")]),e("h4",{staticClass:"fz-4"},[t._v(t._s(a.title))])]),e("div",{staticClass:"card-body pt-0"},[t._v(" 折扣碼： "),e("span",{staticClass:"badge bg-primary fz-1"},[t._v(t._s(a.code))])])])})),0)]),e("div",{staticClass:"input-group input-group-sm mt-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control fz-2",attrs:{placeholder:"請輸入折扣碼",type:"text",id:"inputCoupon"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-primary fz-2",attrs:{type:"button"},on:{click:function(a){return t.addCouponCode(t.coupon_code)}}},[e("i",{staticClass:"fas fa-ticket-alt"}),t._v(" 套用折扣碼 ")])])])])]),e("div",{staticClass:"col-md-6"},[t._m(1),e("div",{staticClass:"border border-primary p-4 radius-2"},[e("h5",{staticClass:"d-flex justify-content-between fz-5 mb-8"},[e("span",[t._v("總計金額")]),e("span",[t._v("NT "+t._s(t.currencyFilter(t.total))+" 元")])]),t.cart.carts[0].coupon?e("div",{staticClass:"d-flex justify-content-between"},[e("p",{staticClass:"d-md-none d-lg-block bg-primary rounded fz-3 text-light mb-2 px-1"},[e("i",{staticClass:"fas fa-tag"}),t._v(" 優惠券「"+t._s(t.cart.carts[0].coupon.title)+"」 折扣 "+t._s(t.cart.carts[0].coupon.percent)+"% ")]),e("p",{staticClass:"d-none d-md-block d-lg-none bg-primary rounded fz-3 text-light mb-2 px-2"},[e("i",{staticClass:"fas fa-tag"}),t._v(" 優惠券 折扣 "+t._s(t.cart.carts[0].coupon.percent)+"% ")]),e("span",[t._v("- NT "+t._s(t.currencyFilter(t.total-t.finalTotal))+" 元")])]):t._e(),t.finalTotal!==t.total?e("h5",{staticClass:"d-flex justify-content-between fz-5 fw_bold text-primary"},[e("span",[t._v("最終折扣金額")]),e("span",[t._v("NT "+t._s(t.currencyFilter(t.finalTotal))+" 元")])]):t._e()])])]),t.cart.carts.length?e("div",{staticClass:"row justify-content-center my-5"},[e("validation-observer",{staticClass:"col-md-6",scopedSlots:t._u([{key:"default",fn:function(a){var s=a.handleSubmit;return[e("h4",{staticClass:"fw_bold"},[e("i",{staticClass:"fas fa-user-edit me-2"}),t._v(" 聯絡人資料 ")]),e("form",{staticClass:"border border-primary rounded py-3 px-8",on:{submit:function(a){return a.preventDefault(),s(t.createOrder)}}},[e("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("div",{staticClass:"form-group mb-2"},[e("label",{staticClass:"fz-4",attrs:{for:"email"}},[t._v("Email "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:r,attrs:{id:"email",type:"email",name:"email"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("div",{staticClass:"form-group mb-2"},[e("label",{staticClass:"fz-4",attrs:{for:"username"}},[t._v("收件人姓名 "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:r,attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"required|numeric|min:8"},scopedSlots:t._u([{key:"default",fn:function(a){a.errors;var s=a.classes;return[e("div",{staticClass:"form-group mb-2"},[e("label",{staticClass:"fz-4",attrs:{for:"usertel"}},[t._v("收件人電話 "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.user.tel,expression:"form.user.tel",modifiers:{number:!0}}],staticClass:"form-control",class:s,attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("span",{staticClass:"invalid-feedback"},[t._v("錯誤的輸入格式")])])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){a.errors;var s=a.classes;return[e("div",{staticClass:"form-group mb-2"},[e("label",{staticClass:"fz-4",attrs:{for:"useraddress"}},[t._v("收件人地址 "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:s,attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v("地址欄位不得留空")])])]}}],null,!0)}),e("div",{staticClass:"form-group mb-2"},[e("label",{staticClass:"fz-4",attrs:{for:"comment"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"3"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-red",attrs:{type:"submit"}},[t._v("送出訂單")])])],1)]}}],null,!1,1646732979)})],1):t._e()])])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",{staticClass:"fw_bold"},[e("i",{staticClass:"fas fa-tag me-2"}),t._v(" 套用折扣券 ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",{staticClass:"fw_bold"},[e("i",{staticClass:"fas fa-dollar-sign me-2"}),t._v(" 訂單金額 ")])}],o=e("5530"),n=(e("99af"),e("a9e3"),e("ac1f"),e("5319"),e("b680"),e("159b"),e("2f62")),i={data:function(){return{coupons:[],coupon_code:"",allCoupons:[],form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:Object(o["a"])({getAllCoupons:function(){this.allCoupons=[{id:"-Mj9ig2v2ri3mS7v3S2w",percent:88,code:"vip888",title:"老顧客～自己人！"},{id:"-Mj9j0EKadwNrj9EeVG",percent:66,code:"whosyourdaddy",title:"週年慶特別折扣"}]},addCouponCode:function(t){this.$store.dispatch("addCouponCode",t)},getCoupon_code:function(t){this.coupon_code=t},createOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("bluesky","/order"),e=t.form;t.$store.dispatch("updateLoading",!0),t.$http.post(a,{data:e}).then((function(a){a.data.success&&(t.$store.dispatch("getCart"),t.$router.push("/cart_checkout/".concat(a.data.orderId))),t.$store.dispatch("updateLoading",!1)}))},currencyFilter:function(t){var a=Number(t);return"$".concat(a.toFixed(0).replace(/./g,(function(t,a,e){var s=a&&"."!==t&&(e.length-a)%3===0?", ".concat(t).replace(/\s/g,""):t;return s})))}},Object(n["b"])(["getCart"])),computed:Object(o["a"])({total:function(){var t=this,a=0;return t.cart.carts&&t.cart.carts.forEach((function(t){a+=t.total})),a},finalTotal:function(){var t=this,a=0;return a=t.cart.final_total!==t.cart.total?t.cart.final_total:t.cart.total,a}},Object(n["c"])(["cart"])),created:function(){this.getCart(),this.getAllCoupons(),this.$store.dispatch("checkoutCartPage",!1)}},l=i,c=e("2877"),d=Object(c["a"])(l,s,r,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d221b88.4945b7c5.js.map