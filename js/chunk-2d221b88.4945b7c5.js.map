{"version":3,"sources":["webpack:///./src/views/frontend/CartOrder.vue?3cfb","webpack:///src/views/frontend/CartOrder.vue","webpack:///./src/views/frontend/CartOrder.vue?f11e","webpack:///./src/views/frontend/CartOrder.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","_v","_l","item","key","id","on","$event","getCoupon_code","code","_s","percent","title","directives","name","rawName","value","expression","domProps","target","composing","coupon_code","addCouponCode","currencyFilter","total","cart","carts","coupon","finalTotal","_e","scopedSlots","_u","fn","ref","handleSubmit","preventDefault","createOrder","errors","classes","form","user","class","$set","modifiers","_n","$forceUpdate","staticRenderFns","data","coupons","allCoupons","email","tel","address","message","methods","getAllCoupons","$store","dispatch","vm","$http","post","url","response","success","$router","push","currency","computed","forEach","final_total","created","getCart","component"],"mappings":"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","file":"js/chunk-2d221b88.4945b7c5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"nav_space\"},[_c('div',{staticClass:\"container py-12\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6 mb-4\"},[_vm._m(0),_c('div',{staticClass:\"border border-primary radius-2 p-4\"},[_c('button',{staticClass:\"btn btn-outline-primary\",attrs:{\"type\":\"button\",\"data-bs-toggle\":\"collapse\",\"data-bs-target\":\"#collapseCoupon\",\"aria-expanded\":\"false\",\"aria-controls\":\"collapseCoupon\"}},[_vm._v(\" 查看折扣券 \")]),_c('div',{staticClass:\"collapse\",attrs:{\"id\":\"collapseCoupon\"}},[_c('ul',{staticClass:\"bg-light rounded py-1 mt-2\"},_vm._l((_vm.allCoupons),function(item){return _c('li',{key:item.id,staticClass:\"card couponCard m-2\",on:{\"click\":function($event){return _vm.getCoupon_code(item.code)}}},[_c('div',{staticClass:\"card-header bg-white d-flex align-items-lg-baseline border-bottom-0\"},[_c('span',{staticClass:\"badge bg-light text-primary fz-4 me-4\"},[_c('i',{staticClass:\"fas fa-tags\"}),_vm._v(\" \"+_vm._s(item.percent)+\"% \")]),_c('h4',{staticClass:\"fz-4\"},[_vm._v(_vm._s(item.title))])]),_c('div',{staticClass:\"card-body pt-0\"},[_vm._v(\" 折扣碼： \"),_c('span',{staticClass:\"badge bg-primary fz-1\"},[_vm._v(_vm._s(item.code))])])])}),0)]),_c('div',{staticClass:\"input-group input-group-sm mt-4\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.coupon_code),expression:\"coupon_code\"}],staticClass:\"form-control fz-2\",attrs:{\"placeholder\":\"請輸入折扣碼\",\"type\":\"text\",\"id\":\"inputCoupon\"},domProps:{\"value\":(_vm.coupon_code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.coupon_code=$event.target.value}}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-primary fz-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addCouponCode(_vm.coupon_code)}}},[_c('i',{staticClass:\"fas fa-ticket-alt\"}),_vm._v(\" 套用折扣碼 \")])])])])]),_c('div',{staticClass:\"col-md-6\"},[_vm._m(1),_c('div',{staticClass:\"border border-primary p-4 radius-2\"},[_c('h5',{staticClass:\"d-flex justify-content-between fz-5 mb-8\"},[_c('span',[_vm._v(\"總計金額\")]),_c('span',[_vm._v(\"NT \"+_vm._s(_vm.currencyFilter(_vm.total))+\" 元\")])]),(_vm.cart.carts[0].coupon)?_c('div',{staticClass:\"d-flex justify-content-between\"},[_c('p',{staticClass:\"d-md-none d-lg-block bg-primary rounded fz-3 text-light mb-2 px-1\"},[_c('i',{staticClass:\"fas fa-tag\"}),_vm._v(\" 優惠券「\"+_vm._s(_vm.cart.carts[0].coupon.title)+\"」 折扣 \"+_vm._s(_vm.cart.carts[0].coupon.percent)+\"% \")]),_c('p',{staticClass:\"d-none d-md-block d-lg-none bg-primary rounded fz-3 text-light mb-2 px-2\"},[_c('i',{staticClass:\"fas fa-tag\"}),_vm._v(\" 優惠券 折扣 \"+_vm._s(_vm.cart.carts[0].coupon.percent)+\"% \")]),_c('span',[_vm._v(\"- NT \"+_vm._s(_vm.currencyFilter(_vm.total-_vm.finalTotal))+\" 元\")])]):_vm._e(),(_vm.finalTotal !== _vm.total)?_c('h5',{staticClass:\"d-flex justify-content-between fz-5 fw_bold text-primary\"},[_c('span',[_vm._v(\"最終折扣金額\")]),_c('span',[_vm._v(\"NT \"+_vm._s(_vm.currencyFilter(_vm.finalTotal))+\" 元\")])]):_vm._e()])])]),(_vm.cart.carts.length)?_c('div',{staticClass:\"row justify-content-center my-5\"},[_c('validation-observer',{staticClass:\"col-md-6\",scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('h4',{staticClass:\"fw_bold\"},[_c('i',{staticClass:\"fas fa-user-edit me-2\"}),_vm._v(\" 聯絡人資料 \")]),_c('form',{staticClass:\"border border-primary rounded py-3 px-8\",on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.createOrder)}}},[_c('validation-provider',{attrs:{\"rules\":\"required|email\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('div',{staticClass:\"form-group mb-2\"},[_c('label',{staticClass:\"fz-4\",attrs:{\"for\":\"email\"}},[_vm._v(\"Email \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(\"*\")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.email),expression:\"form.user.email\"}],staticClass:\"form-control\",class:classes,attrs:{\"id\":\"email\",\"type\":\"email\",\"name\":\"email\"},domProps:{\"value\":(_vm.form.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"email\", $event.target.value)}}}),_c('span',{staticClass:\"invalid-feedback\"},[_vm._v(_vm._s(errors[0]))])])]}}],null,true)}),_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('div',{staticClass:\"form-group mb-2\"},[_c('label',{staticClass:\"fz-4\",attrs:{\"for\":\"username\"}},[_vm._v(\"收件人姓名 \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(\"*\")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.name),expression:\"form.user.name\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"name\":\"name\",\"id\":\"username\",\"placeholder\":\"輸入姓名\"},domProps:{\"value\":(_vm.form.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"name\", $event.target.value)}}}),_c('span',{staticClass:\"invalid-feedback\"},[_vm._v(_vm._s(errors[0]))])])]}}],null,true)}),_c('validation-provider',{attrs:{\"rules\":\"required|numeric|min:8\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('div',{staticClass:\"form-group mb-2\"},[_c('label',{staticClass:\"fz-4\",attrs:{\"for\":\"usertel\"}},[_vm._v(\"收件人電話 \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(\"*\")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.user.tel),expression:\"form.user.tel\",modifiers:{\"number\":true}}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"tel\",\"id\":\"usertel\",\"placeholder\":\"請輸入電話\"},domProps:{\"value\":(_vm.form.user.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"tel\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"invalid-feedback\"},[_vm._v(\"錯誤的輸入格式\")])])]}}],null,true)}),_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('div',{staticClass:\"form-group mb-2\"},[_c('label',{staticClass:\"fz-4\",attrs:{\"for\":\"useraddress\"}},[_vm._v(\"收件人地址 \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(\"*\")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.address),expression:\"form.user.address\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"name\":\"address\",\"id\":\"useraddress\",\"placeholder\":\"請輸入地址\"},domProps:{\"value\":(_vm.form.user.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"address\", $event.target.value)}}}),_c('span',{staticClass:\"invalid-feedback\"},[_vm._v(\"地址欄位不得留空\")])])]}}],null,true)}),_c('div',{staticClass:\"form-group mb-2\"},[_c('label',{staticClass:\"fz-4\",attrs:{\"for\":\"comment\"}},[_vm._v(\"留言\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.message),expression:\"form.message\"}],staticClass:\"form-control\",attrs:{\"name\":\"\",\"id\":\"comment\",\"cols\":\"30\",\"rows\":\"3\"},domProps:{\"value\":(_vm.form.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"message\", $event.target.value)}}})]),_c('div',{staticClass:\"text-right\"},[_c('button',{staticClass:\"btn btn-red\",attrs:{\"type\":\"submit\"}},[_vm._v(\"送出訂單\")])])],1)]}}],null,false,1646732979)})],1):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',{staticClass:\"fw_bold\"},[_c('i',{staticClass:\"fas fa-tag me-2\"}),_vm._v(\" 套用折扣券 \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',{staticClass:\"fw_bold\"},[_c('i',{staticClass:\"fas fa-dollar-sign me-2\"}),_vm._v(\" 訂單金額 \")])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"nav_space\">\n    <div class=\"container py-12\">\n      <div class=\"row\">\n        <div class=\"col-md-6 mb-4\">\n          <h4 class=\"fw_bold\">\n            <i class=\"fas fa-tag me-2\"></i>\n            套用折扣券\n          </h4>\n          <div class=\"border border-primary radius-2 p-4\">\n            <button class=\"btn btn-outline-primary\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseCoupon\" aria-expanded=\"false\" aria-controls=\"collapseCoupon\">\n              查看折扣券\n            </button>\n            <div class=\"collapse\" id=\"collapseCoupon\">\n              <ul class=\"bg-light rounded py-1 mt-2\">\n                <li @click=\"getCoupon_code(item.code)\" v-for=\"item in allCoupons\" :key=\"item.id\" class=\"card couponCard m-2\">\n                  <div class=\"card-header bg-white d-flex align-items-lg-baseline border-bottom-0\">\n                    <span class=\"badge bg-light text-primary fz-4 me-4\">\n                      <i class=\"fas fa-tags\"></i>\n                      {{ item.percent }}%\n                    </span>\n                    <h4 class=\"fz-4\">{{ item.title }}</h4>\n                  </div>\n                  <div class=\"card-body pt-0\">\n                    折扣碼： <span class=\"badge bg-primary fz-1\">{{ item.code }}</span>\n                  </div>\n                </li>\n              </ul>\n            </div>\n            <div class=\"input-group input-group-sm mt-4\">\n              <input class=\"form-control fz-2\" v-model=\"coupon_code\" placeholder=\"請輸入折扣碼\" type=\"text\" id=\"inputCoupon\">\n              <div class=\"input-group-append\">\n                <button class=\"btn btn-outline-primary fz-2\" type=\"button\"\n                  @click=\"addCouponCode(coupon_code)\">\n                  <i class=\"fas fa-ticket-alt\"></i>\n                  套用折扣碼\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-6\">\n          <h4 class=\"fw_bold\">\n            <i class=\"fas fa-dollar-sign me-2\"></i>\n            訂單金額\n          </h4>\n          <div class=\"border border-primary p-4 radius-2\">\n            <h5 class=\"d-flex justify-content-between fz-5 mb-8\">\n              <span>總計金額</span>\n              <span>NT {{ currencyFilter(total) }} 元</span>\n            </h5>\n            <div v-if=\"cart.carts[0].coupon\" class=\"d-flex justify-content-between\">\n              <p class=\"d-md-none d-lg-block bg-primary rounded fz-3 text-light mb-2 px-1\">\n                <i class=\"fas fa-tag\"></i>\n                優惠券「{{ cart.carts[0].coupon.title }}」 折扣 {{ cart.carts[0].coupon.percent }}%\n              </p>\n              <p class=\"d-none d-md-block d-lg-none bg-primary rounded fz-3 text-light mb-2 px-2\">\n                <i class=\"fas fa-tag\"></i>\n                優惠券 折扣 {{ cart.carts[0].coupon.percent }}%\n              </p>\n              <span>- NT {{ currencyFilter(total-finalTotal)}} 元</span>\n            </div>\n            <h5 v-if=\"finalTotal !== total\" class=\"d-flex justify-content-between fz-5 fw_bold text-primary\">\n              <span>最終折扣金額</span>\n              <span>NT {{ currencyFilter(finalTotal) }} 元</span>\n            </h5>\n          </div>\n        </div>\n      </div>\n      <div class=\"row justify-content-center my-5\" v-if=\"cart.carts.length\">\n        <validation-observer v-slot=\"{ handleSubmit }\" class=\"col-md-6\">\n          <h4 class=\"fw_bold\">\n            <i class=\"fas fa-user-edit me-2\"></i>\n            聯絡人資料\n          </h4>\n          <form class=\"border border-primary rounded py-3 px-8\" @submit.prevent=\"handleSubmit(createOrder)\">\n            <validation-provider rules=\"required|email\" v-slot=\"{ errors, classes }\">\n              <div class=\"form-group mb-2\">\n                <!-- 輸入框 -->\n                <label class=\"fz-4\" for=\"email\">Email <span class=\"text-danger\">*</span></label>\n                <input id=\"email\" type=\"email\" name=\"email\" v-model=\"form.user.email\" class=\"form-control\" :class=\"classes\">\n                <!-- 錯誤訊息 -->\n                <span class=\"invalid-feedback\">{{ errors[0] }}</span>\n              </div>\n            </validation-provider>\n            <validation-provider rules=\"required\" v-slot=\"{ errors, classes }\">\n              <div class=\"form-group mb-2\">\n                <label class=\"fz-4\" for=\"username\">收件人姓名 <span class=\"text-danger\">*</span></label>\n                <input v-model=\"form.user.name\" class=\"form-control\"\n                  :class=\"classes\" type=\"text\"  name=\"name\" id=\"username\"\n                    placeholder=\"輸入姓名\">\n                <span class=\"invalid-feedback\">{{ errors[0] }}</span>\n              </div>\n            </validation-provider>\n            <validation-provider rules=\"required|numeric|min:8\" v-slot=\"{ errors, classes }\">\n              <div class=\"form-group mb-2\">\n                <label class=\"fz-4\" for=\"usertel\">收件人電話 <span class=\"text-danger\">*</span></label>\n                <input v-model.number=\"form.user.tel\" class=\"form-control\"\n                :class=\"classes\" type=\"tel\" id=\"usertel\" placeholder=\"請輸入電話\">\n                <span class=\"invalid-feedback\">錯誤的輸入格式</span>\n              </div>\n            </validation-provider>\n            <validation-provider rules=\"required\" v-slot=\"{ errors, classes }\">\n              <div class=\"form-group mb-2\">\n                <label class=\"fz-4\" for=\"useraddress\">收件人地址 <span class=\"text-danger\">*</span></label>\n                <input v-model=\"form.user.address\" class=\"form-control\" :class=\"classes\" type=\"text\" name=\"address\" id=\"useraddress\"\n                  placeholder=\"請輸入地址\">\n                <span class=\"invalid-feedback\">地址欄位不得留空</span>\n              </div>\n            </validation-provider>\n            <div class=\"form-group mb-2\">\n              <label class=\"fz-4\" for=\"comment\">留言</label>\n              <textarea name=\"\" id=\"comment\" class=\"form-control\" cols=\"30\" rows=\"3\" v-model=\"form.message\"></textarea>\n            </div>\n            <div class=\"text-right\">\n              <button class=\"btn btn-red\" type=\"submit\">送出訂單</button>\n            </div>\n          </form>\n        </validation-observer>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nexport default {\n  data () {\n    return {\n      // isUseCoupon: false,\n      coupons: [],\n      coupon_code: '',\n      allCoupons: [],\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: ''\n        },\n        message: ''\n      }\n    }\n  },\n  methods: {\n    getAllCoupons () {\n      this.allCoupons = [\n        { id: '-Mj9ig2v2ri3mS7v3S2w', percent: 88, code: 'vip888', title: '老顧客～自己人！' },\n        { id: '-Mj9j0EKadwNrj9EeVG', percent: 66, code: 'whosyourdaddy', title: '週年慶特別折扣' }\n      ]\n    },\n    addCouponCode (code) {\n      this.$store.dispatch('addCouponCode', code)\n    },\n    getCoupon_code (code) {\n      this.coupon_code = code\n    },\n    createOrder () {\n      const vm = this\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order`\n      const order = vm.form\n      vm.$store.dispatch('updateLoading', true)\n      vm.$http.post(url, { data: order }).then((response) => {\n        // console.log('訂單已建立',response)\n        if (response.data.success) {\n          vm.$store.dispatch('getCart')\n          vm.$router.push(`/cart_checkout/${response.data.orderId}`)\n        }\n        vm.$store.dispatch('updateLoading', false)\n        // vm.pagination = response.data.pagination\n      })\n    },\n    currencyFilter (num) {\n      const n = Number(num)\n      return `$${n.toFixed(0).replace(/./g, (c, i, a) => {\n        const currency = (i && c !== '.' && ((a.length - i) % 3 === 0) ? `, ${c}`.replace(/\\s/g, '') : c)\n        return currency\n      })}`\n    },\n    ...mapActions(['getCart'])\n  },\n  computed: {\n    total () {\n      const vm = this\n      let total = 0\n      if (vm.cart.carts) {\n        vm.cart.carts.forEach(item => {\n          // total += item.qty * item.product.price\n          total += item.total\n        })\n      }\n      return total\n    },\n    finalTotal () {\n      const vm = this\n      let finalTotal = 0\n      if (vm.cart.final_total !== vm.cart.total) {\n        finalTotal = vm.cart.final_total\n\n        // vm.cart.carts.forEach(function (item) {\n        // finalTotal +=\n        // item.qty * item.product.price * (vm.cart.carts[0].coupon.percent / 100)\n        //   finalTotal = item.final_total\n        // })\n      } else {\n        finalTotal = vm.cart.total\n        // vm.cart.carts.forEach(function (item) {\n        // finalTotal += item.qty * item.product.price\n        //   finalTotal = item.total\n        // })\n      }\n      return finalTotal\n    },\n    ...mapGetters(['cart'])\n  },\n  created () {\n    this.getCart()\n    this.getAllCoupons()\n    this.$store.dispatch('checkoutCartPage', false)\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CartOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CartOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CartOrder.vue?vue&type=template&id=762c1a67&\"\nimport script from \"./CartOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./CartOrder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}